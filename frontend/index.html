<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Containerized LEMP Example 1</title>
  </head>
  <body>
    <h1>Frontend (Nginx)</h1>
    <div id="msg">Loading...</div>
    <div id="time">Loading time...</div>
    <script>
      fetch("/api")
        .then((r) => r.json())
        .then((d) => {
          document.getElementById("msg").innerText = d.message;
        })
        .catch((e) => {
          document.getElementById("msg").innerText = "API error: " + e;
        });

      fetch("/api/time")
        .then((r) => r.json())
        .then((d) => {
          if (d.time) {
            document.getElementById("time").innerText =
              "Server time: " + d.time;
          } else if (d.error) {
            document.getElementById("time").innerText =
              "Time error: " + d.details;
          }
        })
        .catch((e) => {
          document.getElementById("time").innerText = "Time API error: " + e;
        });
    </script>
  </body>
</html>
